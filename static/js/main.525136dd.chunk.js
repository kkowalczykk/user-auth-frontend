(this["webpackJsonpuser-auth-system-front"]=this["webpackJsonpuser-auth-system-front"]||[]).push([[0],{36:function(n,e,t){n.exports=t(65)},41:function(n,e,t){},64:function(n,e,t){},65:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(32),i=t.n(o),c=(t(41),t(5)),u=t.n(c),s=t(12),l=t(6),d=t(13),b=t(3),p=t(1),f=t(10),m=t.n(f),g=Object(r.createContext)(null),x=t(2);function h(){var n=Object(p.a)(["\n      width: 50px;\n      height: 25px;\n      background-color: rgb(45, 82, 207);\n      margin-right: 10px;\n      color: white;\n      border: none;\n      transition: 0.3s ease-in-out;\n      cursor: pointer;\n      &:hover{\n            background-color: rgb(19, 50, 156);\n      }\n"]);return h=function(){return n},n}function v(){var n=Object(p.a)(["\n      width: 50px;\n      height: 50px;\n      border: 2px solid blue;\n      border-radius: 50%;\n      position: relative;\n      animation: "," 1.5s linear infinite;\n      &::after{\n            width: 25px;\n            height: 25px;\n            background-color: white;\n            content: '';\n            position: absolute;\n            left: 0;\n            bottom: 0;\n      }\n      \n"]);return v=function(){return n},n}function w(){var n=Object(p.a)(["\n      from {\n            transform: rotate(0deg);\n      }\n      to{\n            transform: rotate(360deg);\n      }\n"]);return w=function(){return n},n}function k(){var n=Object(p.a)(["\n      width: 90%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      input{\n            outline: none;\n            box-sizing: border-box;\n            -webkit-box-sizing: border-box;\n            -moz-box-sizing: border-box;\n            width: calc(90% - 80px);\n            height: 100%;\n            background: #fff;\n            border: 1px solid #ccc;\n            padding: 5px;\n            color: #555; \n      }\n\n      input:focus{\n            box-shadow: 0 0 5px #4196f2;\n\t      border: 1px solid #4196f2;\n      }\n"]);return k=function(){return n},n}function j(){var n=Object(p.a)(["\n      box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\twidth: 80px;\n      padding: 5px;\n\tbackground: #43D1AF;\n\tborder-bottom: 2px solid #30C29E;\n\tborder-top-style: none;\n\tborder-right-style: none;\n\tborder-left-style: none;\t\n      color: #fff;\n      transition: ease-in-out 0.2s;\n      cursor: pointer;\n      &:hover{\n            background: #2EBC99;\n      }\n"]);return j=function(){return n},n}function E(){var n=Object(p.a)(["\n      width: 90%;\n      margin: 10px 0;\n      height: 60px;\n      background-color: rgb(245, 251, 255);\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      @media screen and (min-width: 768px){\n            width: 60%;\n      }\n\n      p{\n            margin: 5px 10px;\n            margin: 10px 0;\n            height: 60px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n      }\n"]);return E=function(){return n},n}function O(){var n=Object(p.a)(["\n      width: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n"]);return O=function(){return n},n}var y=x.a.div(O()),C=x.a.div(E()),z=x.a.button(j()),S=x.a.div(k()),F=Object(x.b)(w()),D=x.a.div(v(),F),I=x.a.button(h()),N=function(){var n=Object(r.useContext)(g).userData,e=Object(b.f)(),t=Object(r.useState)("loading"),o=Object(l.a)(t,2),i=o[0],c=o[1],d=Object(r.useState)(""),p=Object(l.a)(d,2),f=p[0],x=p[1];Object(r.useEffect)((function(){n.user?setTimeout((function(){return h()}),800):e.push("/login")}),[n]);var h=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("http://localhost:5000/todos/all",{headers:{"x-auth-token":n.token}});case 3:t=e.sent,c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("http://localhost:5000/todos/",{title:f},{headers:{"x-auth-token":n.token}});case 3:e.sent,h(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.delete("http://localhost:5000/todos/".concat(t._id),{headers:{"x-auth-token":n.token}});case 3:e.sent,h(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return a.a.createElement(y,null,n.user?a.a.createElement("h1",null,"Welcome ",a.a.createElement("span",{style:{color:"blue"}},n.user.displayName)):null,n.user?a.a.createElement(S,null,a.a.createElement("input",{value:f,onChange:function(n){return x(n.target.value)}}),a.a.createElement(z,{onClick:v}," Add Todo")):null,"loading"===i?a.a.createElement(D,null):i.map((function(n,e){return a.a.createElement(C,{key:e},a.a.createElement("p",null,n.title),a.a.createElement(I,{onClick:function(){return w(n)}},"Done"))})))};function P(){var n=Object(p.a)(["\n      color: tomato;\n      width: 100%;\n      padding: 3%;\n      text-align: center;\n      \n      .clearError{\n            margin-left: 10px;\n            background: none;\n            color: tomato;\n            cursor: pointer;\n            border: 1px solid black;\n            border-radius: 3px;\n      }\n"]);return P=function(){return n},n}function U(){var n=Object(p.a)(["\n      box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\twidth: 100%;\n\tpadding: 3%;\n\tbackground: #43D1AF;\n\tborder-bottom: 2px solid #30C29E;\n\tborder-top-style: none;\n\tborder-right-style: none;\n\tborder-left-style: none;\t\n      color: #fff;\n      transition: ease-in-out 0.2s;\n      cursor: pointer;\n      &:hover{\n            background: #2EBC99;\n      }\n"]);return U=function(){return n},n}function A(){var n=Object(p.a)(["\n      width: 80vw;\n      max-width: 400px;\n\tmargin: 0px auto;\n\tpadding: 16px;\n      background: #F7F7F7;\n      \n      input{\n            outline: none;\n            box-sizing: border-box;\n            -webkit-box-sizing: border-box;\n            -moz-box-sizing: border-box;\n            width: 100%;\n            background: #fff;\n            margin-bottom: 4%;\n            border: 1px solid #ccc;\n            padding: 3%;\n            color: #555; \n      }\n\n      input:focus{\n            box-shadow: 0 0 5px #4196f2;\n\t      padding: 3%;\n\t      border: 1px solid #4196f2;\n      }\n"]);return A=function(){return n},n}function B(){var n=Object(p.a)(["\n      width: 80vw;\n      max-width: 400px;\n      text-align: center;\n      padding: 0 16px;\n      margin: 0 ;\n"]);return B=function(){return n},n}function L(){var n=Object(p.a)(["\n      padding-top: 50px;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n"]);return L=function(){return n},n}var R=x.a.div(L()),J=x.a.h2(B()),T=x.a.form(A()),V=x.a.button(U()),X=x.a.div(P()),M=function(){var n=Object(r.useState)(),e=Object(l.a)(n,2),t=e[0],o=e[1],i=Object(r.useState)(),c=Object(l.a)(i,2),d=c[0],p=c[1],f=Object(r.useState)(),x=Object(l.a)(f,2),h=x[0],v=x[1],w=Object(r.useState)(),k=Object(l.a)(w,2),j=k[0],E=k[1],O=Object(b.f)(),y=Object(r.useContext)(g).setUserData,C=Object(r.useState)(),z=Object(l.a)(C,2),S=z[0],F=z[1],D=function(){var n=Object(s.a)(u.a.mark((function n(e){var r,a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,r={email:t,password:d,passwordCheck:h,displayName:j},n.next=5,m.a.post("http://localhost:5000/users/register",r);case 5:return n.sent,n.next=8,m.a.post("http://localhost:5000/users/login",{email:t,password:d});case 8:a=n.sent,y({token:a.data.token,user:a.data.user}),localStorage.setItem("auth-token",a.data.token),O.push("/"),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(1),n.t0.response.data.msg&&F(n.t0.response.data.msg);case 17:case"end":return n.stop()}}),n,null,[[1,14]])})));return function(e){return n.apply(this,arguments)}}();return a.a.createElement(R,null,a.a.createElement(J,null,"Register"),a.a.createElement(T,null,a.a.createElement("label",{htmlFor:"register-email"},"Email"),a.a.createElement("input",{id:"register-email",type:"text",onChange:function(n){return o(n.target.value)}}),a.a.createElement("label",{htmlFor:"password"},"Password"),a.a.createElement("input",{id:"password",type:"password",onChange:function(n){return p(n.target.value)}}),a.a.createElement("label",{htmlFor:"verifyPassword"},"Verify Password"),a.a.createElement("input",{id:"verifyPassword",type:"password",onChange:function(n){return v(n.target.value)}}),a.a.createElement("label",{htmlFor:"displayName"},"Display Name"),a.a.createElement("input",{id:"displayName",type:"text",onChange:function(n){return E(n.target.value)}}),S&&a.a.createElement(X,null,S," ",a.a.createElement("button",{className:"clearError",onClick:function(){return F(void 0)}},"X")),a.a.createElement(V,{type:"submit",onClick:D},"Register")))};function W(){var n=Object(p.a)(["\n      color: tomato;\n      width: 100%;\n      padding: 3%;\n      text-align: center;\n      \n      .clearError{\n            margin-left: 10px;\n            width: 20px;\n            height: 20px;\n            background: tomato;\n            color: white;\n            cursor: pointer;\n            border: none;\n            border-radius: 50%;\n      }\n"]);return W=function(){return n},n}function _(){var n=Object(p.a)(["\n      box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\twidth: 100%;\n\tpadding: 3%;\n\tbackground: #43D1AF;\n\tborder-bottom: 2px solid #30C29E;\n\tborder-top-style: none;\n\tborder-right-style: none;\n\tborder-left-style: none;\t\n      color: #fff;\n      transition: ease-in-out 0.2s;\n      cursor: pointer;\n      &:hover{\n            background: #2EBC99;\n      }\n"]);return _=function(){return n},n}function q(){var n=Object(p.a)(["\n      width: 80vw;\n      max-width: 400px;\n\tmargin: 0px auto;\n\tpadding: 16px;\n      background: #F7F7F7;\n      \n      input{\n            outline: none;\n            box-sizing: border-box;\n            -webkit-box-sizing: border-box;\n            -moz-box-sizing: border-box;\n            width: 100%;\n            background: #fff;\n            margin-bottom: 4%;\n            border: 1px solid #ccc;\n            padding: 3%;\n            color: #555; \n      }\n\n      input:focus{\n            box-shadow: 0 0 5px #4196f2;\n\t      padding: 3%;\n\t      border: 1px solid #4196f2;\n      }\n"]);return q=function(){return n},n}function G(){var n=Object(p.a)(["\n      width: 80vw;\n      max-width: 400px;\n      text-align: center;\n      padding: 0 16px;\n      margin: 0 ;\n"]);return G=function(){return n},n}function H(){var n=Object(p.a)(["\n      padding-top: 50px;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n"]);return H=function(){return n},n}var K=x.a.div(H()),Q=x.a.h2(G()),Y=x.a.form(q()),Z=x.a.button(_()),$=x.a.div(W()),nn=function(){var n=Object(r.useState)(),e=Object(l.a)(n,2),t=e[0],o=e[1],i=Object(r.useState)(),c=Object(l.a)(i,2),d=c[0],p=c[1],f=Object(b.f)(),x=Object(r.useContext)(g),h=x.userData,v=x.setUserData,w=Object(r.useState)(),k=Object(l.a)(w,2),j=k[0],E=k[1];Object(r.useEffect)((function(){h.user&&f.push("/")}),[h]);var O=function(){var n=Object(s.a)(u.a.mark((function n(e){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,m.a.post("http://localhost:5000/users/login",{email:t,password:d});case 4:r=n.sent,v({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),f.push("/"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),n.t0.response.data.msg&&E(n.t0.response.data.msg);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}();return a.a.createElement(K,null,a.a.createElement(Q,null,"Log in"),a.a.createElement(Y,null,a.a.createElement("label",{htmlFor:"login-email"},"Email"),a.a.createElement("input",{id:"login-email",type:"text",onChange:function(n){return o(n.target.value)}}),a.a.createElement("label",{htmlFor:"password"},"Password"),a.a.createElement("input",{id:"password",type:"password",onChange:function(n){return p(n.target.value)}}),j&&a.a.createElement($,null,j," ",a.a.createElement("button",{className:"clearError",onClick:function(){return E(void 0)}},"X")),a.a.createElement(Z,{onClick:O},"Log in")))};function en(){var n=Object(p.a)(["\n      background-color: rgb(45, 82, 207);\n      color: white;\n      width: 100px;\n      height: 40px;\n      border: none;\n      margin-right: 10px;\n      transition: 0.3s ease-in-out;\n      cursor: pointer;\n      &:hover{\n            background-color: rgb(19, 50, 156);\n      }\n\n      &:focus{\n            outline: none;\n      }\n\n      @media screen and (max-width: 820px) {\n            width: 70px;\n            height: 30px;\n      }\n"]);return en=function(){return n},n}function tn(){var n=Object(p.a)(["\n      display: flex;\n"]);return tn=function(){return n},n}var rn=x.a.div(tn()),an=x.a.button(en()),on=function(){var n=Object(r.useContext)(g),e=n.userData,t=n.setUserData,o=Object(b.f)();return a.a.createElement(rn,null,e.user?a.a.createElement(an,{onClick:function(){t({token:void 0,user:void 0}),localStorage.setItem("auth-token","")}}," Log out"):a.a.createElement(a.a.Fragment,null,a.a.createElement(an,{onClick:function(){return o.push("/login")}},"Log in"),a.a.createElement(an,{onClick:function(){return o.push("/register")}},"Register")))};function cn(){var n=Object(p.a)(["\n      font-size: 1.2em;\n      color: white;\n      margin:0 10px;\n"]);return cn=function(){return n},n}function un(){var n=Object(p.a)(["\n      text-decoration: none;\n"]);return un=function(){return n},n}function sn(){var n=Object(p.a)(["\n      display: flex;\n      height: 70px;\n      align-items: center;\n      justify-content: space-between;\n      background-color: rgb(68, 150, 227);\n"]);return sn=function(){return n},n}var ln=x.a.div(sn()),dn=Object(x.a)(d.b)(un()),bn=x.a.h1(cn()),pn=function(){return a.a.createElement(ln,null,a.a.createElement(dn,{to:"/"},a.a.createElement(bn,null,"User authentication system")),a.a.createElement(on,null))};t(64);var fn=function(){var n=Object(r.useState)({token:"",user:""}),e=Object(l.a)(n,2),t=e[0],o=e[1];return Object(r.useEffect)((function(){(function(){var n=Object(s.a)(u.a.mark((function n(){var e,t;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null===(e=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),e=""),n.next=4,m.a.post("http://localhost:5000/users/tokenIsValid",null,{headers:{"x-auth-token":e}});case 4:if(!n.sent.data){n.next=10;break}return n.next=8,m.a.get("http://localhost:5000/users/",{headers:{"x-auth-token":e}});case 8:t=n.sent,o({token:e,user:t.data});case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[]),a.a.createElement(d.a,null,a.a.createElement(g.Provider,{value:{userData:t,setUserData:o}},a.a.createElement(pn,null),a.a.createElement(b.c,null,a.a.createElement(b.a,{exact:!0,path:"/",component:N}),a.a.createElement(b.a,{exact:!0,path:"/register",component:M}),a.a.createElement(b.a,{exact:!0,path:"/login",component:nn}))))};i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(fn,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.525136dd.chunk.js.map